<ion-view title="Spot Detail">
  <ion-nav-buttons side="right">
    <button ng-click="deleteSpot();" class="button button-icon icon ion-trash-b"></button>
    <button ng-click="submit();" class="button button-icon icon ion-checkmark-circled"></button>
  </ion-nav-buttons>
  <ion-content class="has-header">
    <form class="list">
      <div class="row responsive-md">
        <div class="col">
          <div class="item item-divider">
            {{spot.properties.spottype}}
          </div>
          <label class="item item-input">
            <span class="input-label">Spot Name</span>
            <input type="text" placeholder="Name this Spot" ng-model="spot.properties.name" autofocus>
          </label>
          <label class="item item-input">
            <span class="input-label">ID</span>
            <input type="text" disabled ng-model="spot.properties.id">
          </label>
          <label class="item item-input">
            <span class="input-label">Date</span>
            <input type="date" ng-model="spot.properties.date">
          </label>
          <label class="item item-input">
            <span class="input-label">Time</span>
            <input type="time" ng-model="spot.properties.time">
          </label>
        </div>

        <!-- Location -->
        <div class="col">
          <div class="item item-divider">
            Map Representation
          </div>
          <label class="item item-input">
            <span class="input-label">Geometry</span>
            <input type="text" disabled ng-model="spot.geometry.type">
          </label>
          <label class="item item-input" ng-show="showLatLng">
            <span class="input-label">Latitude</span>
            <input type="number" ng-model="point.latitude" value={{point.latitude}}>
          </label>
          <label class="item item-input" ng-show="showLatLng">
            <span class="input-label">Longitude</span>
            <input type="number" ng-model="point.longitude" value={{point.longitude}}>
          </label>
          <div>
           <!-- Map Interaction -->
            <div>
              <br>
              <button ng-click="goToSpot();" class="button button-small icon-left icon ion-eye">View on Map</button>
              <button ng-click="getLocation();" ng-show="showMyLocationButton" class="button button-small icon-left ion-pinpoint">Set to My Location</button>
              <button ng-click="openMap();" class="button button-small icon-left icon ion-map">Set From Map</button>
            </div>
          </div>
        </div>
      </div>

      <div class="row responsive-md">
        <div class="col">

          <!-- Feature Type -->
          <label class="item item-input item-select" ng-show="showFeatureType">
            <span class="input-label">Feature Type</span>
            <select ng-model="spot.properties.feature_type"
                    ng-options="item.value as item.text for item in feature_type | orderBy:'text'"
                    ng-change="onChange.feature()"></select>
          </label>

          <!-- Strike -->
          <label class="item item-input" ng-show="show.strike">
            <span class="input-label">Strike</span>
            <input type="number" placeholder="strike? (0-360)" ng-model="spot.properties.strike">
          </label>

          <!-- Dip -->
          <label class="item item-input" ng-show="show.dip">
            <span class="input-label">Dip</span>
            <input type="number" placeholder="dip? (0-90)" ng-model="spot.properties.dip">
          </label>

          <!-- Trend -->
          <label class="item item-input" ng-show="show.trend">
            <span class="input-label">Trend</span>
            <input type="number" placeholder="trend? (0-90)" ng-model="spot.properties.trend">
          </label>

          <!-- Plunge -->
          <label class="item item-input" ng-show="show.plunge">
            <span class="input-label">Plunge</span>
            <input type="number" placeholder="plunge? (0-90)" ng-model="spot.properties.plunge">
          </label>
        </div>

        <div class="col">

          <!-- Plane Facing -->
          <label class="item item-input item-select" ng-show="show.plane_facing">
            <span class="input-label">Plane Facing</span>
            <select ng-model="spot.properties.plane_facing" ng-options="item.value as item.text for item in plane_facing | orderBy:'text'" ng-change="onChange.plane_facing()"></select>
          </label>

          <!-- Facing Direction -->
          <label class="item item-input" ng-show="show.facing_direction">
            <span class="input-label">Facing Direction</span>
            <input type="text" placeholder="Facing Direction?" ng-model="spot.properties.facing_direction">
          </label>

          <!-- Fold Type -->
          <label class="item item-input item-select" ng-show="show.fold_type">
            <span class="input-label">Fold Type</span>
            <select ng-model="spot.properties.fold_type" ng-options="item.value as item.text for item in fold_type | orderBy:'text'" ng-change="onChange.fold_type()"></select>
          </label>

          <!-- Fold Detail -->
          <label class="item item-input item-select" ng-show="show.fold_detail">
            <span class="input-label">Fold Detail</span>
            <select ng-model="spot.properties.fold_detail" ng-options="item.value as item.text for item in fold_detail | orderBy:'text'" ng-change="onChange.fold_detail()"></select>
          </label>

          <!-- Directed -->
          <label class="item item-input item-select" ng-show="show.directed">
            <span class="input-label">Directed?</span>
            <select ng-model="spot.properties.directed" ng-options="item.value as item.text for item in directed | orderBy:'text'" ng-change="onChange.directed()"></select>
          </label>

          <!-- Vergence -->
          <label class="item item-input" ng-show="show.vergence">
            <span class="input-label">Vergence</span>
            <input type="text" placeholder="Vergence" ng-model="spot.properties.vergence">
          </label>
        </div>
      </div>
      <div class="row responsive-md">
        <div class="col">
          <!-- Orientation Quality -->
          <label class="item item-input item-select" ng-show="showOrientation_quality">
            <span class="input-label">Orientation Quality</span>
            <select ng-model="spot.properties.orientation_quality" ng-options="item.value as item.text for item in orientation_quality | orderBy:'text'" ng-change="onChange.orientation()"></select>
          </label>
        </div>
        <div class="col">
          <label class="item item-input" ng-show="showUnit_name">
            <span class="input-label">Unit Name</span>
            <input type="text" placeholder="What is the unit name?" ng-model="spot.properties.unit_name">
          </label>
          <label class="item item-input" ng-show="showUnit_label">
            <span class="input-label">Unit Label</span>
            <input type="text" placeholder="What is the unit label?" ng-model="spot.properties.unit_label">
          </label>
        </div>
      </div>

      <!-- Images -->
      <div class="item item-divider">
        Photos
      </div>
      <div class="row responsive-md">
        <div>
          <ul>
            <li ng-repeat="image in spot.images" style="display: inline;">
              <img ng-src="{{image.src}}" width="100" height="100" />
            </li>
          </ul>
        </div>
      </div>
      <button ng-click="cameraModal()" class="button button-small icon-left ion-camera">Add Photo</button>

      <div class="item item-divider">
        Notes
      </div>
      <label class="item item-input">
        <textarea placeholder="Notes about this Spot" rows="4" ng-model="spot.properties.notes"></textarea>
      </label>
      
      <!-- Related Spots -->
      <div ng-show="showRelatedSpots">
        <div class="item item-divider">
          Related Spots
        </div>
        <ion-checkbox ng-repeat="item in other_spots"
                      ng-value="item.value"
                      ng-checked="spot.properties.related_spots.indexOf(item.value) > -1"
                      ng-click="toggleSelection(item.value)">
          {{ item.text }}
        </ion-checkbox>
      </div>
    </form>
  </ion-content>
</ion-view>
